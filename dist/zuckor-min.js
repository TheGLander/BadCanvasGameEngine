(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):(a=a||self,b(a.Zuckor={}))})(this,function(a){'use strict';var f=Math.PI;function b(a){return a*(f/180)}function c(a,b,c){var d=a+" "+b+"x"+c;j.push(d);var e=new Image;e.src=a,e.onload=function(){var a=document.createElement("canvas");a.width=c,a.height=b;var f=a.getContext("2d");f.drawImage(e,0,0,c,b),i[d]={},i[d].image=new Image,i[d].image.src=a.toDataURL("image/png").replace("image/png","image/octet-stream")}}function d(a,c){function b(){this.constructor=a}n(a,c),a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)}function e(a,c,d){var e=d.x+c.width/2,f=d.y+c.height/2,g=d.degree-90;a.save(),a.translate(e,f),a.rotate(b(g)),a.drawImage(c,-(c.width/2),-(c.height/2)),a.restore()}var g={},h={},i={},j=[],k={},l=function(){function a(a){var b=a.x,c=a.y,d=a.degree,e=a.layer,f=a.nickname,h=a.width,i=a.height,j=a.autoSize,k=a.hidden;this.x=0,this.y=0,this.degree=90,this.layer=0,this.width=0,this.height=0,this.autoSize=!0,this.hidden=!1,this.physics={},this.type=null,this.deleted=!1,this.x=b||0,this.y=c||0,this.degree=null==d?90:d,this.nickname=f||"",this.layer=e||0,this.width=h||0,this.height=i||0,this.autoSize=void 0===j||j,this.hidden=k||!1,this.id=function(){if([]==Object.keys(g))return 0;for(var a in Object.keys(g))if(a!=(void 0===g[a]?void 0:g[a].id))return parseInt(a);return Object.keys(g).length}(),this.stage=null,g[this.id]=this}return a.prototype.collisionWithSolid=function(){for(var a in g)if(g[a].physics.solid&&g[a].id!==this.id){var b=g[a];if(this.collisionWith(b))return b}return null},a.prototype.collisionWith=function(a){var b=Math.abs;return b(this.x+this.width/2-(a.x+a.width/2))<=this.width/2+a.width/2&&b(this.y+this.height/2-(a.y+a.height/2))<=this.height/2+a.height/2},a.prototype["delete"]=function(){this.deleted||(void 0!==this.physics.calcHandle&&cancelAnimationFrame(this.physics.calcHandle),delete g[this.id],this.stage&&delete this.stage.sprites[this.id],this.deleted=!0)},a.prototype.togglePhysics=function(a){var c=this,d=void 0===a?{}:a,e=d.velocity,f=void 0===e?0:e,g=d.acceleration,h=void 0===g?0:g,i=d.velocityLoss,j=void 0===i?0:i,k=d.accelerationLoss,l=void 0===k?0:k,m=d.degree,n=void 0===m?0:m,o=d.maxVelocity,p=void 0===o?void 0:o,q=d.gravityVelocity,r=void 0===q?0:q,s=d.gravityAcceleration,t=void 0===s?0:s,u=d.gravityDegree,v=void 0===u?90:u,w=d.gravityMaxVelocity,x=void 0===w?void 0:w,y=d.solid;this.physics={velocity:f,acceleration:h,velocityLoss:j,accelerationLoss:l,degree:n,maxVelocity:p,gravityVelocity:r,gravityAcceleration:t,gravityDegree:v,gravityMaxVelocity:x,solid:void 0!==y&&y,calcHandle:0};var z=function(){var a=Math.sin,d=Math.cos;c.physics.gravityVelocity+=c.physics.gravityAcceleration/60,c.collisionWithSolid()?c.physics.gravityVelocity=0:c.x+=c.physics.gravityVelocity/60*d(b(c.physics.gravityDegree)),c.collisionWithSolid()?c.physics.gravityVelocity=0:c.y+=c.physics.gravityVelocity/60*a(b(c.physics.gravityDegree)),c.physics.gravityVelocity>c.physics.gravityMaxVelocity&&(c.physics.gravityVelocity=c.physics.gravityMaxVelocity),c.physics.velocity+=c.physics.acceleration/60,c.physics.velocity-=0>c.physics.velocity-c.physics.velocityLoss/60?c.physics.velocity:c.physics.velocityLoss/60,c.physics.acceleration-=0>c.physics.acceleration-c.physics.accelerationLoss/60?c.physics.acceleration:c.physics.accelerationLoss/60,c.collisionWithSolid()?c.physics.velocity=0:c.x+=c.physics.velocity/60*d(b(c.physics.degree)),c.collisionWithSolid()?c.physics.velocity=0:c.y+=c.physics.velocity/60*a(b(c.physics.degree)),c.physics.velocity>c.physics.maxVelocity&&(c.physics.velocity=c.physics.maxVelocity),c.physics.calcHandle=requestAnimationFrame(z)};this.physics.calcHandle=requestAnimationFrame(z)},a.prototype.togglePlayer=function(a){var b=a.maxSpeed,c=a.acceleration;this.player={looking:!1,acceleration:c,maxSpeed:b},this.togglePhysics({solid:!0});this.physics.calcHandle=requestAnimationFrame(function(){})},a}(),m=function(){function a(a){var b=this,c=void 0===a?{}:a,d=c.height,e=void 0===d?500:d,f=c.width,g=void 0===f?500:f,i=c.color,j=void 0===i?void 0:i,k=c.canvas,l=void 0===k?void 0:k;l.height=e||500,l.width=g,this.id=function(){if([]==Object.keys(h))return 0;for(var a in Object.keys(h))if(a!=(void 0===h[a]?void 0:h[a].id))return parseInt(a);return Object.keys(h).length}(),h[this.id]=this,this.sprites=[],l.addEventListener("click",function(a){var c=l.getBoundingClientRect(),d=a.clientX-c.left,e=a.clientY-c.top;for(var f in console.log("x: "+d+" y: "+e),b.sprites)if(d>b.sprites[f].x&&b.sprites[f].x+b.sprites[f].width>d&&b.sprites[f].y<e&&b.sprites[f].y+b.sprites[f].height>e){b.sprites[f].onClick instanceof Function&&b.sprites[f].onClick(a);break}}),l.onmousemove=function(a){var c=l.getBoundingClientRect(),d=a.clientX-c.left,e=a.clientY-c.top;for(var f in b.sprites)if(d>b.sprites[f].x&&b.sprites[f].x+b.sprites[f].width>d&&b.sprites[f].y<e&&b.sprites[f].y+b.sprites[f].height>e){b.sprites[f].onHover instanceof Function&&b.sprites[f].onHover(a);break}},this.color=j,this.height=e,this.width=g,l.width=this.width,l.height=this.height;var m=l.getContext("2d");this.context=m;var n=function(){var a=Math.trunc;m.clearRect(0,0,l.width,l.height),null!=b.color&&(m.fillStyle=b.color,m.fillRect(0,0,l.width,l.height));var c=Object.values(b.sprites).sort(function(c,a){var b=c.layer,d=a.layer;return b<d?-1:b>d?1:0});for(var d in c){var e=c[d];if(e.x=a(e.x),e.y=a(e.y),e.height=a(e.height),e.width=a(e.width),void 0===e.renderer&&null!==e.renderer)throw new Error("All Sprites must have renderers.");e.hidden||e.renderer(m)}b.renderHandle=requestAnimationFrame(n)};this.renderHandle=requestAnimationFrame(n)}return a.prototype.assign=function(a){this.sprites[a.id]=a,g[a.id].stage=this},a.prototype["delete"]=function(){cancelAnimationFrame(this.renderHandle),delete h[this.id]},a}(),n=function(a,c){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])},n(a,c)},o=function(a){function b(b){var c=b.x,d=b.y,e=b.degree,g=b.layer,h=b.width,i=b.height,j=b.autoSize,k=b.hidden,l=b.nickname,m=b.radius,n=b.outColor,o=b.inColor,p=b.lineWidth,q=a.call(this,{x:c,y:d,degree:e,layer:g,width:h,height:i,autoSize:void 0===j||j,hidden:k,nickname:l})||this;return q.renderer=function(a){a.lineWidth=q.lineWidth,q.width=2*q.radius,q.height=2*q.radius,a.beginPath(),a.arc(q.x+q.radius,q.y+q.radius,q.radius,Math.PI,3*f),a.strokeStyle=q.outColor,a.fillStyle=q.inColor,a.stroke(),a.fill()},q.radius=m||0,q.outColor=n||"#ffffff",q.inColor=o||"#ffffff",q.lineWidth=p||1,q.type="circle",q}return d(b,a),b}(l),p=function(a){function b(b){var c=b.x,d=b.y,e=b.degree,f=b.layer,g=b.width,h=b.height,i=b.autoSize,j=b.hidden,k=b.nickname,l=b.inColor,m=b.outColor,n=b.lineWidth,o=a.call(this,{x:c,y:d,degree:e,layer:f,width:g,height:h,autoSize:void 0===i||i,hidden:j,nickname:k})||this;return o.renderer=function(a){a.fillStyle=o.inColor,a.strokeStyle=o.outColor,a.lineWidth=o.lineWidth,a.fillRect(o.x,o.y,o.width,o.height)},o.lineWidth=n||1,o.inColor=l||"#000000",o.outColor=m||"#ff0000",o.type="rectangle",o}return d(b,a),b}(l),q=function(a){function b(b){var d=b.x,f=b.y,g=b.degree,h=b.layer,l=b.width,m=b.height,n=b.autoSize,o=b.hidden,p=b.nickname,q=b.image,r=a.call(this,{x:d,y:f,degree:g,layer:h,width:l,height:m,autoSize:void 0===n||n,hidden:o,nickname:p})||this;return r.renderer=function(a){if(!(r.width&&r.height)){var b=k[r.image];b||(k[r.image]=new Image,k[r.image].src=r.image,b=k[r.image]),r.autoSize?(!r.width&&(r.width=b.width),!r.height&&(r.height=b.height)):(!r.width&&(r.width=1),!r.height&&(r.height=1))}var d=r.image+" "+r.height+"x"+r.width;j.includes(d)?Object.keys(i).includes(d)&&e(a,i[d].image,r):c(r.image,r.height,r.width)},r.image=q||"",r.type="image",r}return d(b,a),b}(l);console.log("%cPowered by the \u0290\u0308uckor engine\n%cMade by G lander","background: #005454; color: #BFF8F8;font-size:20px","color:#0000ff;background:#BFF8F8;font-size:13px"),l.Circle=o,l.Rect=p,l.Img=q,a.Sprite=l,a.Stage=m,a.loadImg=c,a.sprites=g,a.stages=h,Object.defineProperty(a,"__esModule",{value:!0})});
//# sourceMappingURL=zuckor-min.js.map
