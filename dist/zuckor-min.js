(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):(a=a||self,b(a.Zuckor={}))})(this,function(a){'use strict';var f=Math.sin,g=Math.cos,h=Math.PI;function b(a){function b(a,b,c){return c*=h/180,a*g(c)-b*f(c)}function c(a,b,c){return c*=h/180,b*g(c)+a*f(c)}let d=[];return d[0]={x:b(-a.width/2,-a.height/2,a.degree)+a.width/2,y:c(-a.width/2,-a.height/2,a.degree)+a.height/2},d[1]={x:b(-a.width/2,a.height/2,a.degree)+a.width/2,y:c(-a.width/2,a.height/2,a.degree)+a.height/2},d[2]={x:b(a.width/2,a.height/2,a.degree)+a.width/2,y:c(a.width/2,a.height/2,a.degree)+a.height/2},d[3]={x:b(a.width/2,-a.height/2,a.degree)+a.width/2,y:c(a.width/2,-a.height/2,a.degree)+a.height/2},d}function c(a){return a*(h/180)}function d(a,b,c){let d=`${a} ${b}x${c}`;m.push(d);let e=new Image;e.src=a,e.onload=function(a){let e=document.createElement("canvas");e.width=c,e.height=b;let f=e.getContext("2d");f.drawImage(a.target,0,0,c,b),l[d]={},l[d].image=new Image,l[d].image.src=e.toDataURL("image/png").replace("image/png","image/octet-stream")}}function e(a,b,d){let e=d.x+b.width/2,f=d.y+b.height/2,g=d.degree-90;a.save(),a.translate(e,f),a.rotate(c(g)),a.drawImage(b,-(b.width/2),-(b.height/2)),a.restore()}class i{constructor({x:a,y:c,degree:d,layer:e,nickname:f,width:g,height:h,points:i,autoSize:l=!0,hidden:k}){this.x=a||0,this.y=c||0,this.degree=d===void 0?90:d,this.nickname=f||"",this.layer=e||0,this.width=g||0,this.height=h||0,this.physics={},this.type=null,this.autoSize=l,this.hidden=k||!1,this.id=function(){if([]==Object.keys(j))return 0;for(let a in Object.keys(j))if(a!=(j[a]===void 0?void 0:j[a].id))return a;return Object.keys(j).length}();let m=["x","y","degree","width","height"];for(let b in Object.values(arguments[0]))if(isNaN(parseInt(Object.values(arguments[0])[b]))&&m.includes(Object.keys(arguments[0])[b])&&Object.values(arguments[0])[b]!==void 0)throw new Error(`Supplied value type of ${typeof Object.values(arguments[0])[b]}(Or NaN) for argument ${Object.keys(arguments[0])[b]} in a Sprite, must be a number`);this.points=i||b(this),this.stage=null,j[this.id]=this}collisionWithSolid(){for(let a in j)if(j[a].physics.solid&&j[a].id!==this.id){let b=j[a];if(this.collisionWith(b))return b}return null}collisionWith(a){var b=Math.abs;return b(this.x+this.width/2-(a.x+a.width/2))<=this.width/2+a.width/2&&b(this.y+this.height/2-(a.y+a.height/2))<=this.height/2+a.height/2}delete(){this.deleted||(this.physics.calcHandle!==void 0&&cancelAnimationFrame(this.physics.calcHandle),delete j[this.id],this.stage&&delete this.stage.sprites[this.id],this.deleted=!0)}togglePhysics({velocity:a=0,acceleration:b=0,velocityLoss:d=0,accelerationLoss:e=0,degree:h=0,maxVelocity:i=void 0,gravityVelocity:j=0,gravityAcceleration:k=0,gravityDegree:l=90,gravityMaxVelocity:m=void 0,solid:n=!1}={velocity:0,acceleration:0,velocityLoss:0,accelerationLoss:0,degree:0,maxVelocity:void 0,gravityVelocity:0,gravityAcceleration:0,gravityDegree:90,gravityMaxVelocity:void 0,solid:!1}){this.physics.velocity=a,this.physics.acceleration=b,this.physics.velocityLoss=d,this.physics.accelerationLoss=e,this.physics.degree=h,this.physics.maxVelocity=i,this.physics.gravityAcceleration=k,this.physics.gravityVelocity=j,this.physics.gravityDegree=l,this.physics.gravityMaxVelocity=m,this.physics.solid=n;const o=()=>{this.physics.gravityVelocity+=this.physics.gravityAcceleration/60,this.collisionWithSolid()?this.physics.gravityVelocity=0:this.x+=this.physics.gravityVelocity/60*g(c(this.physics.gravityDegree)),this.collisionWithSolid()?this.physics.gravityVelocity=0:this.y+=this.physics.gravityVelocity/60*f(c(this.physics.gravityDegree)),this.physics.gravityVelocity>this.physics.gravityMaxVelocity&&(this.physics.gravityVelocity=this.physics.gravityMaxVelocity),this.physics.velocity+=this.physics.acceleration/60,this.physics.velocity-=0>this.physics.velocity-this.physics.velocityLoss/60?this.physics.velocity:this.physics.velocityLoss/60,this.physics.acceleration-=0>this.physics.acceleration-this.physics.accelerationLoss/60?this.physics.acceleration:this.physics.accelerationLoss/60,this.collisionWithSolid()?this.physics.velocity=0:this.x+=this.physics.velocity/60*g(c(this.physics.degree)),this.collisionWithSolid()?this.physics.velocity=0:this.y+=this.physics.velocity/60*f(c(this.physics.degree)),this.physics.velocity>this.physics.maxVelocity&&(this.physics.velocity=this.physics.maxVelocity),this.physics.calcHandle=requestAnimationFrame(o)};this.physics.calcHandle=requestAnimationFrame(o)}togglePlayer({maxSpeed:a,acceleration:b}){this.player={looking:null,maxSpeed:a||500,acceleration:b||50},this.togglePhysics({solid:!0});this.physics.calcHandle=requestAnimationFrame(()=>{})}}console.log("%cPowered by the \u0290\u0308uckor engine\n%cMade by G lander","background: #005454; color: #BFF8F8;font-size:20px","color:#0000ff;background:#BFF8F8;font-size:13px");let j={},k={},l={},m=[],n={};i.Img=class extends i{constructor({x:a,y:b,degree:c,layer:f,width:g,height:h,points:i,autoSize:p=!0,hidden:j,nickname:k,image:o}){super({x:a,y:b,degree:c,layer:f,width:g,height:h,points:i,autoSize:p,hidden:j,nickname:k}),this.image=o||"",this.type="image",this.renderer=a=>{if(!(this.width&&this.height)){let a=n[this.image];a||(n[this.image]=new Image,n[this.image].src=this.image,a=n[this.image]),this.autoSize?(!this.width&&(this.width=a.width),!this.height&&(this.height=a.height)):(!this.width&&(this.width=1),!this.height&&(this.height=1))}let b=`${this.image} ${this.height}x${this.width}`;m.includes(b)?Object.keys(l).includes(b)&&e(a,l[b].image,this):d(this.image,this.height,this.width)}}},i.Rect=class extends i{constructor({x:a,y:b,degree:c,layer:d,width:e,height:f,points:g,autoSize:m=!0,hidden:h,nickname:i,inColor:j,outColor:k,lineWidth:l}){super({x:a,y:b,degree:c,layer:d,width:e,height:f,points:g,autoSize:m,hidden:h,nickname:i}),this.lineWidth=l||1,this.inColor=j||"#000000",this.outColor=k||"#ff0000",this.type="rectangle",this.renderer=a=>{a.fillStyle=sprite.color,a.lineWidth=sprite.lineWidth,a.fillRect(sprite.x,sprite.y,sprite.width,sprite.height)}}},i.Circle=class extends i{constructor({x:a,y:b,degree:c,layer:d,width:e,height:f,points:g,autoSize:p=!0,hidden:i,nickname:k,radius:l,outColor:m,inColor:n,lineWidth:o}){super({x:a,y:b,degree:c,layer:d,width:e,height:f,points:g,autoSize:p,hidden:i,nickname:k}),this.radius=l||0,this.outColor=m||"#ffffff",this.inColor=n||"#ffffff",this.lineWidth=o||1,this.type="circle",this.renderer=a=>{a.lineWidth=sprite.lineWidth,sprite.width=2*sprite.radius,sprite.height=2*sprite.radius,j[sprite.id].width=2*sprite.radius,j[sprite.id].height=2*sprite.radius,a.beginPath(),a.arc(sprite.x+sprite.radius,sprite.y+sprite.radius,sprite.radius,Math.PI,3*h),a.strokeStyle=sprite.outColor,a.fillStyle=sprite.inColor,a.stroke(),a.fill()}}},a.Sprite=i,a.Stage=class{constructor({height:a=500,width:b=500,color:c=void 0,canvas:d=document.getElementById("game")}={height:500,width:500,color:void 0,canvas:document.getElementById("game")}){d.height=a,d.width=b,this.id=function(){if([]==Object.keys(k))return 0;for(let a in Object.keys(k))if(a!=(k[a]===void 0?void 0:k[a].id))return a;return Object.keys(k).length}(),k[this.id]=this,this.sprites={},d.addEventListener("click",a=>{const b=d.getBoundingClientRect(),c=a.clientX-b.left,e=a.clientY-b.top;for(let b in console.log("x: "+c+" y: "+e),this.sprites)if(c>this.sprites[b].x&&this.sprites[b].x+this.sprites[b].width>c&&this.sprites[b].y<e&&this.sprites[b].y+this.sprites[b].height>e){this.sprites[b].onClick instanceof Function&&this.sprites[b].onClick(a);break}}),d.onmousemove=a=>{const b=d.getBoundingClientRect(),c=a.clientX-b.left,e=a.clientY-b.top;for(let b in this.sprites)if(c>this.sprites[b].x&&this.sprites[b].x+this.sprites[b].width>c&&this.sprites[b].y<e&&this.sprites[b].y+this.sprites[b].height>e){this.sprites[b].onMouseOver instanceof Function&&this.sprites[b].onMouseOver(a);break}},this.color=c,this.height=a,this.width=b,d.width=this.width,d.height=this.height;let e=d.getContext("2d");this.context=e;let f=()=>{var a=Math.trunc;e.clearRect(0,0,d.width,d.height),this.color!=null&&(e.fillStyle=this.color,e.fillRect(0,0,d.width,d.height));let b=Object.values(this.sprites).sort(function(c,a){let b=c.layer,d=a.layer;return b<d?-1:b>d?1:0});for(let c in b){let d=b[c];if(d.x=a(d.x),d.y=a(d.y),d.height=a(d.height),d.width=a(d.width),void 0===d.renderer&&null!==d.renderer)throw new Error("All Sprites must have renderers.");d.hidden||d.renderer(e)}this.renderHandle=requestAnimationFrame(f)};this.renderHandle=requestAnimationFrame(f)}assign(a){this.sprites[a.id]=a,j[a.id].stage=this}delete(){cancelAnimationFrame(this.renderHandle),delete k[this.id]}},a.imgNameSizes=n,a.imgNames=m,a.loadImg=d,a.spriteImg=l,a.sprites=j,a.stages=k,Object.defineProperty(a,"__esModule",{value:!0})});
//# sourceMappingURL=zuckor-min.js.map
